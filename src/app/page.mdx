import { Guides } from '@/components/Guides'
import { Resources } from '@/components/Resources'
import { HeroPattern } from '@/components/HeroPattern'

export const metadata = {
  title: 'TIRMP API Documentation',
  description:
    'Learn everything there is to know about the TIRMP API and integrate TIRMP into your product.',
}

<HeroPattern />

# Prerequisite {{ className: 'text-4xl'}}
Before integrating with the TIRMP API, ensure the following requirements are in place: {{ className: 'lead' }}

### Onboarding and Registeration {{ className: 'mt-0'}}
- Your organization must be registered and approved by the TIRMP system administrator.
- API access credentials (API key) will be issued upon successful onboarding.

### API Key Generation {{ className: 'mt-0'}}

- An administrator from your organization must log into the TIRMP portal to generate an API key.
- Keep this key secure; it will be used in the Authorization header for every API request.

### Webhook Setup (for Bulk Verification) {{ className: 'mt-0'}}

- If you intend to use the bulk verification endpoint, set up a secure and accessible webhook URL to receive asynchronous results. The webhook can be configured via the TIRMP platform.

### MSISDN Format Compliance {{ className: 'mt-0'}}

- All phone numbers must be submitted in the 11-digit MSISDN format (e.g., 08012345678), based on the E.164 standard without the '+' symbol.

### Network and Security Readiness {{ className: 'mt-0'}}

- Ensure outbound HTTPS traffic is allowed from your system to the TIRMP API endpoints.
- Use secure HTTPS (TLS) communication at all times.

### Development Environment Access {{ className: 'mt-0'}}

- For testing, request access to the TIRMP sandbox environment to simulate API requests and verify your integration.

### Development Team Familiarity {{ className: 'mt-0'}}

- Your developers should be familiar with RESTful API principles, JSON payload structures, and handling common HTTP status codes.



# Introduction {{ className: 'mt-20 text-4xl'}}

The Telecomm Identity Risk Management Portal (TIRMP) API provides a centralized and secure interface for verifying and updating the status of mobile phone numbers across participating platforms. It is designed to support fraud prevention, regulatory compliance, and customer data integrity for stakeholders in the mobile and digital financial ecosystem. {{ className: 'lead' }}

The TIRMP API serves two main categories of users: {{className:'lead'}}

**Telecom Operators:** 
These entities are authorized to update the status of phone numbers in the TIRMP database—such as marking numbers as churned, swapped, blacklisted, or valid (null/normal). This ensures accurate, real-time information is available to downstream service providers. {{className: 'lead'}}

**Service Providers (e.g., fintechs, banks, insurance companies):** 
These users can verify the status of phone numbers to ensure they are safe and currently owned by the intended user. This is especially critical during onboarding, authentication, or other sensitive customer interactions. {{className: 'lead'}}

Access to endpoints is strictly controlled: {{className: 'lead'}}

Status update endpoints are exclusive to authorized telecom operators. {{className: 'lead'}}

Verification endpoints are available to all registered and approved service providers. {{className: 'lead'}}

This documentation outlines all available API endpoints and includes comprehensive guidance on authentication, response structures, error handling, and implementation best practices to ensure seamless integration and data consistency. {{className: 'lead'}}


<div className="not-prose mt-6 mb-16 flex gap-3">
  <Button href="/quickstart" arrow="right">
    <>Quickstart</>
  </Button>
  <Button href="/sdks" variant="outline">
    <>About SMMS</>
  </Button>
</div>

# Authentication {{ className: ' text-4xl' }}

All API calls require API Key-based authentication. The API key must be included in the Authorization header for every request. 
Admins can generate API keys for their accounts directly from the platform. {{ className: 'lead' }}

<div className="not-prose">
<Row>
  <Col>
    ```json {{ title: 'Example header' }}
    { "Authorisation": "Bearer <token>" }
    ```
  </Col>
</Row>
</div>

Tokens are provided to each registered entity during onboarding by the system administrator. {{ className: 'lead' }}

# Glossary {{className: 'mb-5 mt-14 text-4xl'}}

- **MSISDN:** Mobile Subscriber Integrated Services Digital Network Number (11 digits)
- **API Key:** Security passed in headers for authorization 
- **Reassigned Date:** The date the phone number was officially deactivated from its previous user and reallocated to a new user by the telecom operator.
- **Churned:** Number has been recycled and/or reassigned due to dormancy
- **Swapped:** Sim has been replaced due to loss/theft/damage 
- **Blacklisted:** Number has been blocked/barred
- **Null/Normal:** Number not in any of the above states


# API endpoints {{ className: 'mb-5 mt-10 text-4xl'}}

## Telecom Operator Endpoints {{className: 'lead'}}
Purpose: There are two endpoints available for updating phone number statuses in the TIRMP database—one for single updates and one for bulk updates. These endpoints enable telecom operators to modify the status of mobile numbers, ensuring that service providers across platforms have access to the most current information. Statuses may include blacklisted, churned, swapped, or valid (Null/Normal). This real-time synchronization supports effective risk mitigation and fraud prevention. {{ className: 'lead'}}

## Phone Number Status Update Endpoint.
Method:  PUT <br/>
URL:  https://smms.cabsolonline.com/v1/phone/api/phone-numbers/status


{/* Purpose: This endpoint allows telecom operators to update the status of a mobile phone number in the TIRMP database. It ensures that service providers across platforms have access to the most current status—such as whether a number has been blacklisted, churned, swapped, or is valid (Null/Normal)—for risk mitigation and fraud prevention. {{ className: 'lead' }} */}

<hr className='py-0'/>

**When to Use:** {{className:'lead'}}
- After phone number is **churned**
- When a number is **blacklisted** due to fraudulent activity or regulatory actions.
- When a number is **swapped**


<div>
  <table class="w-full border-collapse shadow-sm">
    <thead>
      <tr>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Parameter</th>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Type</th>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Required</th>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4">uid</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4">UUID</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4">Yes</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4">
          Unique identifier of the mobile number record
        </td>
      </tr>
    </tbody>
  </table>
</div>

uid is a required path variable and must be included directly in the endpoint URL, e.g., `/phone-status/{uid}`. {{className: 'lead'}}


**Phone Number Status Update Request Schema:**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
    "reason": "culpa quis dolor", 
    "status": "nulla", 
    "reassignmentDate": "0006-09-15",
    "occurrenceOfStatusDate": "0006-09-15"
}
```
</CodeGroup>
</div>

**Phone Number Status Update Response Schema:**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
    "oldStatus": "dolor la",
    "newStatus": "dolor mollit nisi amet",
    "changeReason": "ullamco quis",
    "phoneNumber": "et nulla ullamco",
    "changedByName": "aliquip ex",
    "createdAt": "1987-10-29T13:54:23.021Z"
}
```
</CodeGroup>
</div>

## Phone Number Status Update (bulk) Endpoint.
Purpose: This endpoint allows authorized operators (telecom providers or other designated entities) to update the status of multiple phone numbers at once in the TIMRP system. For example, suppose several numbers become churned, swapped, or blacklisted. In that case, the operator can submit those updates in bulk to ensure accurate and up-to-date records for downstream service providers. {{className: 'lead'}}

Method: PUT <br/>
URL :  https://smms.cabsolonline.com/v1/phone/api/phone-numbers/status/bulk

**Sample Request Payload**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
    "status": "CHURNED,SWAPPED,BLACKLISTED,NORMAL,NULL",
    "uid": "sunt proident",
    "reassignmentDate": "0006-09-15",
    "occurrenceOfStatusDate": "0006-09-15"
}
```
</CodeGroup>
</div>

**Sample Response**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
  {
    "status": "string",
    "data": "string",
    "statusCode": "string"
  }
}
```
</CodeGroup>
</div>

**status:** "" — Represents the overall outcome of the request. It typically returns values like "success" or "error" to indicate whether the operation completed successfully or failed. {{className: 'lead'}}
**data:** "" — Contains the actual result or payload of the response, such as a list of the updated phone number records or related output.
**statusCode:** "" — Represents the HTTP status code associated with the response, such as 200 for success or 400 for a bad request. It helps clients interpret the result programmatically.

## Phone Number Upload (Bulk) Endpoint
Purpose: This endpoint allows telecom operators to seamlessly upload multiple phone numbers via API integration, enabling smooth interoperability with their legacy systems. {{className:'lead'}}

Method: POST <br/>
URL: https://smms.cabsolonline.com/v1/phone/api/phone-numbers/upload/bulk

**Sample Request**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
  "phoneNumbers": [
    {
      "phoneNumber": "08012345678",
      "reassignmentDate": "2023-06-15",
      "occurrenceOfStatusDate": "2023-06-01",
      "status": "REASSIGNED",
      "mobileNetwork": "MTN"
    },
    {
      "phoneNumber": "08123456789",
      "reassignmentDate": "2023-07-10",
      "occurrenceOfStatusDate": "2023-07-01",
      "status": "SWAPPED",
      "mobileNetwork": "Airtel"
    },
    {
      "phoneNumber": "09098765432",
      "reassignmentDate": "2023-08-20",
      "occurrenceOfStatusDate": "2023-08-10",
      "status": "CHURNED",
      "mobileNetwork": "Glo"
    }
  ]
}

```
</CodeGroup>
</div>

**Sample Response**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
  "status": "string",
  "data": "string",
  "statusCode": "string"
}
```
</CodeGroup>
</div>

## Service Provider Endpoints (Fintechs, Banks, etc.)

Purpose: These endpoints are accessible to registered organizations to verify the current status of phone numbers. Before a service provider onboards a user or allows them to perform sensitive operations—such as opening an account, initiating transactions, or resetting passwords—they should confirm that the phone number is both safe and currently owned by the user. This verification step helps detect cases where a number may have been recently churned, blacklisted, or swapped, thereby reducing the risk of fraud or unauthorized access. {{className:'lead'}}
This endpoint checks the current status of the phone number in the TIRMP database. {{className: 'lead'}}

When to Use:
- During user onboarding.
- Before initiating sensitive transactions.
- Periodic checks to ensure the ongoing validity of stored numbers.

## Process flow:

1. Send a POST request with the phone number.
2. The API returns the current status of the number:
    - **Churned** →  Stop the process; the number now belongs to a new user (potential fraud risk).
    - **Blacklisted** → Stop the process; the number is no longer in use.  
    - **Swapped** → Indicates that the SIM card associated with the phone number has been replaced—typically due to loss, theft, or damage. While the number may still belong to the same user, this status may warrant additional verification to ensure the user's identity and prevent potential misuse.  
    - **Null/Normal** → Number either not found or does not exist i any of the states listed above.

## Phone Number Status Verification Endpoint

Purpose: Enables organizations—such as banks, fintechs, and digital service providers—to verify the status of an individual mobile number in the TIRMP database. The status may include blacklisted, churned, swapped, or valid (null/normal). This helps ensure real-time access to accurate number status for fraud prevention and risk mitigation across platforms. {{className: 'lead'}}

METHOD: POST <br/>
URL:  'https://smms.cabsolonline.com/v1/phone/api/phone-numbers/verify

**Sample Request**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
  "phoneNumber": "07444009986",
}
```
</CodeGroup>
</div>

## Sample Request
<div className="mb-5">
<CodeGroup>

```json {{ language: 'js' }}
{ 
    "phoneNumber": "07444009986"
}
```
</CodeGroup>
</div>

## Sample Response: 

<div className="mb-20">
<CodeGroup>

```json {{ language: 'js' }}
{ 
  "status": "Success",
    "data": {
      "phoneNumber": "081818#5039",
      "status": "SWAPPED",
      "phoneStatus": null,
      "requestId": "3ddde7f7-e979-4ed6-9e1a-5c947133c887",
      "remarks": null,
      "mobileNetwork": "Etisalat",
      "reassignmentDate": "2022-06-02",
      "verificationTimestamp": "2025-06-11T13:40:42.524013603",
      "occurrenceOfStatusDate": null,
      "errorMessage": null,
      "user": null
    },
  "statusCode":
}
```
</CodeGroup>
</div>

## Phone Number Status Verification (Bulk) Endpoint
**Purpose:** This endpoint allows organizations—such as fintechs, banks, and other institutions—to verify multiple phone numbers at once within the TIRMP system. It is designed for seamless integration into legacy systems, enabling background verification of phone numbers without disrupting existing business processes. {{className: 'lead'}}
To use this endpoint for bulk verification, organizations must first set up a webhook through their account on the platform. This webhook will serve as the destination for receiving the verification results. If the operation is successful, a structured JSON response with the verification status of each phone number will be automatically sent to the registered webhook, enabling efficient and automated processing. {{className: 'lead'}}

**Sample Request Payload**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
 "phoneNumbers": [
    "0801234578",
    "28123456789",
    "09087654321",
    "07011223344",
    "0912345670"
  ]
}
```
</CodeGroup>
</div>

**Sample Response**
<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{ 
 "updates": [
    {
      "status": "string",
      "data": "string",
      "statusCode": "string"
    }
  ]
}
```
</CodeGroup>
</div>

**Please note:** While the response payload will confirm whether the bulk request was successfully received, the actual status results for each phone number will be sent separately to the webhook provided by the requesting organization. See below for a sample phone number verification response that will be delivered to the webhook. {{className:'lead'}}

<div className="mb-5">
<CodeGroup>

```json {{ language: 'js' }}
{ 
 "event": "phone.verification.failed",
 "data": {
    "status": "NOT_FOUND",
    "requestId": "71c0d0b6-ad11-4a12-b86e-7f9db42ee4fc",
    "reassignmentDate": null,
    "verificationTimestamp": "2025-04-29 11:36:15",
    "occurrenceOfStatusDate": null,
    "mobileNetwork": "Mobile Network",
    "msisdn": "08181855634"
  },
  "errorMessage": "Phone number record not found"
}
```
</CodeGroup>
</div>

<div className="mb-10">
<CodeGroup>

```json {{ language: 'js' }}
{
  "event": "phone.verification.success",
  "data": {
    "status": "CHURNED",
    "requestId": "388f0644-2dc3-43e4-8064-8162d1092abb",
    "reassignmentDate": "2022-06-02",
    "verificationTimestamp": "2025-04-30 08:50:00",
    "occurrenceOfStatusDate": "2021-05-23",
    "mobileNetwork": "Mobile Network",
    "msisdn": "07076295624"
  }
}
```
</CodeGroup>
</div>

**Important Note:** <br/>
Only authorized entities can update statuses. Attempts by unauthorized users will result in 403 Forbidden. {{className: 'lead'}}

# Error handling

TIRMP uses standard HTTP status codes. Below are common responses. {{ className: 'lead' }}

- 400 Bad Request: Missing or invalid parameter 
- 401 Unauthorized: Missing or invalid API token 
- 403 Forbidden: Insufficient permission 
- 404 Not Found: Record not found 
- 429 Too Many Requests: Rate limit exceeded 
- 500 Internal Server Error: Unexpected error 

**Sample Error Response**
<div className="mb-10">
<CodeGroup>
```json {{ language: 'js' }}
{ 
  "error": { 
    "code": 400, 
    "message": "Missing required field: status", 
    "details": "The 'status' field is required in the payload" 
  }
}
```
</CodeGroup>
</div>

### Common error scenarios
<div>
  <table class="w-full border-collapse shadow-sm">
    <thead>
      <tr>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Code</th>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Scenario</th>
        <th class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3 text-left font-semibold">Suggested Fix</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">400</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Missing status field</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Add required "status" key in payload</td>
      </tr>
      <tr>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">401</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Authorization heading missing</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Include bearer token in header</td>
      </tr>
      <tr>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">403</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Role not permitted</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Check user role permissions</td>
      </tr>
      <tr>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">404</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Invalid phone number provided</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Verify number exists before request</td>
      </tr>
      <tr>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">429</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Too many requests</td>
        <td class="border-[0.5px] border-[#2D2D2F] bg-[#1D1D20] px-4 py-3">Wait and retry after backoff period</td>
      </tr>
    </tbody>
  </table>
</div>

# Security Considerations {{className: 'text-4xl'}}
- All API calls must be over HTTPS.
- Never expose API keys in frontend applications.
- Rotate keys regularly or immediately if compromised.
- Monitor logs for abuse.

# Frequently Asked Questions (FAQ) {{className: 'mt-10 text-4xl'}}
1. **How do I get an API key?** <br />
API keys can be generated from the TIRMP portal. {{className: 'lead'}}

2. **Can I use the same API key across multiple services?** <br />
Yes, but it’s best practice to use separate keys for production, testing, and environments requiring different access levels. {{className: 'lead'}}

3. **What phone number format should I use in requests?** <br />
You should use the MSISDN format based on the E.164 standard (without the + symbol) for all phone numbers in your API requests. {{className: 'lead'}}

4. **What does 'Null/Normal' mean in the verification response?** <br />
Null/Normal indicates that the phone number does not fall under any defined status—such as churned, swapped, or blacklisted. It may also mean that the number has not yet been registered or updated in the TIRMP database. {{className: 'lead'}}

5. **How frequently is the data updated?** <br />
As frequently as possible. {{className: 'lead'}}

6. **What happens if I try to update a number I'm not authorized to manage?** <br />
If you attempt to update the status of a phone number that you are not authorized to manage, the system will reject the request and return an authorization error. Only registered telecom operators can update numbers within their allocated ranges. Unauthorized access attempts are logged and monitored for security and compliance purposes. {{className: 'lead'}}

7. **Is batch verification supported?** <br />
Yes, batch verification is supported via the Bulk Verification endpoint. Organizations can submit multiple phone numbers in a single request. While the API will acknowledge receipt of the request, the verification results for each number will be sent asynchronously to the webhook provided by the requesting organization. {{className: 'lead'}}

8. **What should I do when I hit the rate limit?** <br />
If you hit the rate limit (429 error), wait before retrying. {{className: 'lead'}}

9. **What if I send an invalid status in an update request?** <br />
If your update request contains an invalid or missing status value, the system will reject the request and return a 400 Bad Request error. The response will include a clear message indicating the issue. {{className: 'lead'}}

10. **Is there a sandbox for testing?** <br />
Yes, TIRMP provides a **sandbox environment** for testing integrations before going live. The sandbox allows you to simulate requests (e.g., verification and status updates) without affecting production data. You’ll receive mock responses that help validate your implementation. {{className: 'lead'}}
To request access to the sandbox, please contact the TIRMP onboarding or support team. {{className:'lead'}}